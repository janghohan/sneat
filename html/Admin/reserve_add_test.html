<?php 

include './dbConnect.php';

if(!isset($_COOKIE['admin_id'])){
  echo "<script> alert('로그인이 필요한 페이지입니다.'); </script>";
  echo "<script> location.href = './admin_login.html';</script>";
}

$today = date("Y-m-d");
// 다음 날짜를 계산합니다.
$todayDate = new DateTime($today);
$nextDayDate = $todayDate->modify('+1 day');

// Y-m-d 형식으로 출력합니다.
$nextDay = $nextDayDate->format("Y-m-d");

 ?>

<!DOCTYPE html>

<html
  lang="en"
  class="light-style layout-navbar-fixed layout-menu-fixed layout-compact"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="../../assets/"
  data-template="vertical-menu-template">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>저전마을 저전 관리자모드</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../../assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet" />

    <!-- Icons -->
    <link rel="stylesheet" href="../../assets/vendor/fonts/boxicons.css" />
    <link rel="stylesheet" href="../../assets/vendor/fonts/fontawesome.css" />
    <link rel="stylesheet" href="../../assets/vendor/fonts/flag-icons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="../../assets/vendor/css/rtl/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../../assets/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../../assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link rel="stylesheet" href="../../assets/vendor/libs/typeahead-js/typeahead.css" />
    <!-- <link rel="stylesheet" href="../../assets/vendor/libs/flatpickr/flatpickr.css" /> -->

    <!-- Page CSS -->

    <link rel="stylesheet" href="../../assets/vendor/css/pages/app-invoice.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Helpers -->
    <script src="../../assets/vendor/js/helpers.js"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="../../assets/vendor/js/template-customizer.js"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../../assets/js/config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">
            <a href="index.html" class="app-brand-link">
              <span class="app-brand-text demo menu-text fw-bold ms-2">관리자</span>
            </a>

            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboards -->
            <li class="menu-item">
              <a href="./" class="menu-link">
                <i class="menu-icon tf-icons bx bx-spreadsheet"></i>
                <div class="text-truncate" data-i18n="대쉬보드">대쉬보드</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="./admin_list.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-face"></i>
                <div class="text-truncate" data-i18n="관리자 관리">관리자 관리</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="./user_list.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-user"></i>
                <div class="text-truncate" data-i18n="유저 관리">유저 관리</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                  <i class="menu-icon tf-icons bx bx-bell"></i>
                  <div class="text-truncate" data-i18n="고객센터 관리">고객센터 관리</div>
              </a>
              <ul class="menu-sub">
                  <li class="menu-item">
                    <a href="./notice_list.html" class="menu-link">
                        <div class="text-truncate" data-i18n="공지사항">공지사항</div>
                      </a>
                  </li>
                  <li class="menu-item">
                    <a href="./qna_list.html" class="menu-link">
                        <div class="text-truncate" data-i18n="문의사항">문의사항</div>
                      </a>
                  </li>
              </ul>
            </li>
            <li class="menu-item active open">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                  <i class="menu-icon tf-icons bx bx-calendar"></i>
                  <div class="text-truncate" data-i18n="예약 관리">예약 관리</div>
              </a>
              <ul class="menu-sub">
                  <li class="menu-item">
                    <a href="./reserve_list.html" class="menu-link">
                        <div class="text-truncate" data-i18n="예약 리스트">예약 리스트</div>
                      </a>
                  </li>
                  <li class="menu-item active">
                    <a href="./reserve_add.html" class="menu-link">
                        <div class="text-truncate" data-i18n="예약하기">예약하기</div>
                      </a>
                  </li>
              </ul>
            </li>
            <li class="menu-item">
              <a href="./popup_list.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-message"></i>
                <div class="text-truncate" data-i18n="팝업 관리">팝업 관리</div>
              </a>
            </li>
          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->
          <?php include './common-top-navigation.php'; ?>
          

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <div class="row invoice-add">
                <!-- Invoice Add-->
                <div class="col-lg-9 col-12 mb-lg-0 mb-4">
                  <div class="card invoice-preview-card">
                    <form id="reserve-form">
                      <input type="hidden" name="booking-price">
                      <div class="card-body">
                        <div style="display: flex;">
                          <dt class="col-sm-6 mb-2 mb-sm-0 text-md-start" style="width:150px; padding-left: 15px;">
                            <span class="h4 text-capitalize mb-0 text-nowrap">예약 서비스</span>
                          </dt>
                          <dd class="col-sm-6 d-flex justify-content-md-start">
                            <div class="w-px-200">
                              <select class="form-select" name="bookingService" id="bookingService" aria-label="Default select example">
                                <?php 
                                $serviceSql = "SELECT * FROM service_list WHERE service_id<=7";
                                $serviceResult = $conn->query($serviceSql);
                                while($serviceRow = $serviceResult->fetch_assoc()){

                                 ?>
                                 <option value="<?=$serviceRow['service_id']?>"><?=$serviceRow['service_name']?></option>
                               <?php } ?>
                              </select>
                            </div>
                          </dd>
                        </div>
                        <style type="text/css">
                          @media (min-width: 768px){
                            html:not([dir=rtl]) .text-md-start {
                                line-height: 35px;
                                width: 100px;
                            }
                          }
                        </style>
                        <div class="row my-4">
                          <div class="col">
                            <div class="accordion" id="collapsibleSection">
                              <!-- Delivery Address -->
                              <div class="card accordion-item">

                                <div id="collapseDeliveryAddress" class="accordion-collapse collapse show" aria-labelledby="headingDeliveryAddress" data-bs-parent="#collapsibleSection">
                                  <div class="accordion-body">
                                    <div class="row g-3">
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-fullname">시작날짜</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="booking-start" name="booking-start" class="form-control" placeholder="YYYY-MM-DD" data-language="ko"  value="<?=$today?>">
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-phone">시작 시간</label>
                                          <div class="col-sm-9">
                                            <input type="text" class="form-control" id="reservationDates" name="booking-s-time" disabled>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-phone">종료날짜</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="booking-end" name="booking-end" class="form-control" placeholder="YYYY-MM-DD" value="<?=$nextDay?>">
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-phone">종료 시간</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="reservationDates2" name="booking-e-time" class="form-control "disabled>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <script src="../../assets/vendor/libs/jquery/jquery.js"></script>
                        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
                         <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
                        <script type="text/javascript">
                        var basicPrice = 150000;
                        var max = 8;
                        var min = 4;
                        var addCost = 20000;
                        var startDate = "<?=$today?>";
                        var endDate = "<?=$nextDay?>";
                        var dayPrice = 150000;
                        var numPrice = 0;
                        var daysDifference = 1;
                        var totalPrice = basicPrice;

                        var serviceVal = 1;

                        var startTime = "9";
                        var endTime = "10";


                        flatpickr("#booking-start", {
                          locale: "ko", // 한글로 설정
                        });

                        flatpickr("#booking-end", {
                          locale: "ko", // 한글로 설정
                        });

                        flatpickr("#reservationDates", {
                          enableTime: true, // 시간 활성화
                            noCalendar: true, // 달력 비활성화
                            dateFormat: "H:i", // 시간 형식 설정 (24시간)
                            time_24hr: true, // 24시간 형식 사용 
                            defaultDate: ["09:00"],
                            // 다양한 옵션 추가 가능
                            onChange: function(selectedDates, dateStr, instance) {
                              // changeRageText(dateStr);
                              startTime = parseInt(dateStr.split(":")[0]);
                              calTotalPrice2();
                              
                            }
                        });
                        flatpickr("#reservationDates2", {
                          enableTime: true, // 시간 활성화
                          noCalendar: true, // 달력 비활성화
                          dateFormat: "H:i", // 시간 형식 설정 (24시간)
                          time_24hr: true, // 24시간 형식 사용 
                          defaultDate: ["10:00"],
                          // 다양한 옵션 추가 가능
                          onChange: function(selectedDates, dateStr, instance) {
                            // if(dateStr.includes('~')) changeRageText(dateStr);
                            endTime = parseInt(dateStr.split(":")[0]);
                            calTotalPrice2();
                          }
                        });


                        $("#bookingService").change(function(){
                          serviceVal = $(this).val();

                          if(serviceVal>3){
                            $("#reservationDates").attr('disabled',false);
                            $("#reservationDates2").attr('disabled',false);
                            $("#booking-end").attr('disabled',true);
                          }else{
                            $("#reservationDates").attr('disabled',true);
                            $("#reservationDates2").attr('disabled',true);
                            $("#booking-end").attr('disabled',false);
                          }
                          $.ajax({
                            type: "POST",
                            url: "./API/get_service_data_api.php", // 서버 엔드포인트를 적절히 변경
                            dataType : 'json',
                            data: {serviceId: serviceVal},
                            success: function(response) {
                                // 서버로부터 성공 응답을 받았을 때 처리
                                console.log(response);
                                basicPrice = response.service_price;
                                min = response.service_min;
                                max = response.service_max;
                                addCost = response.service_addCost;

                                $("#totalPrice").text(basicPrice);
                            },
                            error: function(error) {
                                // 서버로부터 오류 응답을 받았을 때 처리
                                console.error("Error:", error);
                            }
                          });

                        });

                        $("#booking-start").change(function(){
                          startDate = $(this).val();
                          
                          if(serviceVal<=3){
                            calDateTerm();
                          }else{
                            calTotalPrice2();
                          }
                          
                        });

                        $("#booking-end").change(function(){
                          endDate = $(this).val();

                          calDateTerm();
                        });

                        function calDateTerm(){
                          var a = new Date(startDate);
                          var b = new Date(endDate);

                          // 날짜 차이 계산
                          var timeDifference = b.getTime() - a.getTime();

                          // 일 단위로 변환
                          daysDifference = timeDifference / (1000 * 3600 * 24);

                          if(daysDifference>=1) {
                            dayPrice = daysDifference * basicPrice;
                          }else{
                            dayPrice = 0;
                          }
                          calTotalPrice();
                        }
                        

                        $(document).ready(function() {
                          // 이벤트 리스너를 등록하여 input 값이 변경될 때마다 실행되도록 합니다.
                          $('#booking-num').on('input', function() {
                            if(serviceVal<3){
                              num = $(this).val();
                              if(num<=min && num>0){
                                numPrice = 0;
                              }else if(num>min && num <=max){
                                numPrice = (num-min) * addCost * daysDifference;
                              }
                              calTotalPrice();
                            }
                            
                            // 여기에 추가적인 로직을 추가할 수 있습니다.
                          });
                        });

                        function calTotalPrice(){
                          totalPrice = dayPrice + numPrice;
                          $("input[name='booking-price']").val(totalPrice);
                          $("#totalPrice").text(totalPrice);
                        } 

                        function calTotalPrice2(){
                          if(serviceVal==4){
                            if((endTime-startTime)<=4){
                              totalPrice = 50000;
                            }else{
                              totalPrice = 100000;
                            }
                          }else{
                            totalPrice = (endTime-startTime) * basicPrice;
                            if(endTime>18){
                              totalPrice = (((18 - startTime) + 1) * basicPrice);
                            }
                          }
                          
                          if(startTime==18) {
                            totalPrice = basicPrice;
                          }



                          $("input[name='booking-price']").val(totalPrice);
                          $("#totalPrice").text(totalPrice);
                        }                        
                      </script>


                        <hr class="my-4 mx-n4" />


                        <div class="row my-4">
                          <div class="col">
                            <h6>예약자 정보</h6>
                            <div class="accordion" id="collapsibleSection">
                              <!-- Delivery Address -->
                              <div class="card accordion-item">

                                <div id="collapseDeliveryAddress" class="accordion-collapse collapse show" aria-labelledby="headingDeliveryAddress" data-bs-parent="#collapsibleSection">
                                  <div class="accordion-body">
                                    <div class="row g-3">
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-fullname">예약자 이름</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="booking-name" name="booking-name" class="form-control">
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-phone">생년월일</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="booking-birth" name="booking-birth" class="form-control phone-mask" placeholder="ex. 20231218" >
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-phone">전화번호</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="booking-phone" name="booking-phone" class="form-control phone-mask" placeholder="ex. 01045211123" aria-label="ex. 01045211123">
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="row">
                                          <label class="col-sm-3 col-form-label text-sm-end" for="collapsible-phone">총 인원</label>
                                          <div class="col-sm-9">
                                            <input type="text" id="booking-num" name="booking-num" class="form-control phone-mask" >
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <hr class="my-4" />

                        <div class="row">
                          <div class="col-12">
                            <div class="mb-3">
                              <label for="note" class="form-label fw-medium">고객 요청사항:</label>
                              <textarea class="form-control" name="booking-txt" rows="5" id="note"></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <!-- /Invoice Add-->

                <!-- Invoice Actions -->
                <div class="col-lg-3 col-12 invoice-actions">
                  <div class="card mb-4">
                    <div class="card-body">
                      <button
                        class="btn btn-primary d-grid w-100 mb-3" id="reserve-btn">
                        <span class="d-flex align-items-center justify-content-center text-nowrap"
                          ><i class="bx bx-paper-plane bx-xs me-1"></i>예약 저장</span
                        >
                      </button>
                    </div>
                  </div>
                  <div>
                    <div class="d-flex justify-content-between">
                      <span class="w-px-100">비용:</span>
                      <span class="fw-medium" id="totalPrice">150000</span>
                    </div>
                  </div>
                </div>
                <!-- /Invoice Actions -->
              </div>

              <script type="text/javascript">
                $("#reserve-btn").click(function(){
                  
                  var formValid = true;
                  $('#reserve-form input[type="text"]').each(function() {
                    if ($(this).val() === '') {
                      formValid = false;
                      return false; // 반복 중지
                    }
                  });

                  // 폼 유효성 검사 결과에 따라 알림 표시
                  if (!formValid) {
                    alert('값을 채워주세요.');
                    return false;
                  }
                  var dataForm = $("#reserve-form").serialize();
                  
                  $.ajax({
                    type: "POST",
                    url: "./API/reserve_add_api.php", // 서버 엔드포인트를 적절히 변경
                    dataType : 'json',
                    data: dataForm,
                    success: function(response) {
                        // 서버로부터 성공 응답을 받았을 때 처리
                        console.log(response);
                        if(response==1){
                          alert('예약이 완료되었습니다.');
                          location.reload();
                        }

                    },
                    error: function(error) {
                        // 서버로부터 오류 응답을 받았을 때 처리
                        console.error("Error:", error);
                    }
                  });
                });
              </script>

              <!-- Offcanvas -->
              <!-- Send Invoice Sidebar -->
              <div class="offcanvas offcanvas-end" id="sendInvoiceOffcanvas" aria-hidden="true">
                <div class="offcanvas-header mb-3">
                  <h5 class="offcanvas-title">Send Invoice</h5>
                  <button
                    type="button"
                    class="btn-close text-reset"
                    data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
                </div>
                <div class="offcanvas-body flex-grow-1">
                  <form>
                    <div class="mb-3">
                      <label for="invoice-from" class="form-label">From</label>
                      <input
                        type="text"
                        class="form-control"
                        id="invoice-from"
                        value="shelbyComapny@email.com"
                        placeholder="company@email.com" />
                    </div>
                    <div class="mb-3">
                      <label for="invoice-to" class="form-label">To</label>
                      <input
                        type="text"
                        class="form-control"
                        id="invoice-to"
                        value="qConsolidated@email.com"
                        placeholder="company@email.com" />
                    </div>
                    <div class="mb-3">
                      <label for="invoice-subject" class="form-label">Subject</label>
                      <input
                        type="text"
                        class="form-control"
                        id="invoice-subject"
                        value="Invoice of purchased Admin Templates"
                        placeholder="Invoice regarding goods" />
                    </div>
                    <div class="mb-3">
                      <label for="invoice-message" class="form-label">Message</label>
                      <textarea class="form-control" name="invoice-message" id="invoice-message" cols="3" rows="8">
Dear Queen Consolidated,
          Thank you for your business, always a pleasure to work with you!
          We have generated a new invoice in the amount of $95.59
          We would appreciate payment of this invoice by 05/11/2021</textarea
                      >
                    </div>
                    <div class="mb-4">
                      <span class="badge bg-label-primary">
                        <i class="bx bx-link bx-xs"></i>
                        <span class="align-middle">Invoice Attached</span>
                      </span>
                    </div>
                    <div class="mb-3 d-flex flex-wrap">
                      <button type="button" class="btn btn-primary me-3" data-bs-dismiss="offcanvas">Send</button>
                      <button type="button" class="btn btn-label-secondary" data-bs-dismiss="offcanvas">Cancel</button>
                    </div>
                  </form>
                </div>
              </div>
              <!-- /Send Invoice Sidebar -->

              <!-- /Offcanvas -->
            </div>
            <!-- / Content -->

            <div class="container-xxl">
              <div class="col-lg-9 col-12 mb-lg-0 mb-4">
                <div class="card invoice-preview-card">
                  <div class="card-body">
                    <form onsubmit="return false" id="shareHouseForm">
                      <!-- Account Details -->
                      <div id="account-details" class="content active dstepper-block">
                        <div class="content-header mb-3">
                          <h6 class="mb-0">쉐어하우스 정보변경</h6>
                          <small>* 쉐어하우스의 현재 가능인원을 변경하는 페이지 입니다.</small>
                        </div>
                        <div class="row g-3">
                          <div class="col-sm-6">
                            <label class="form-label" for="shareHouse">쉐어하우스 선택</label>
                            <select class="form-select" name="shareHouse">
                              <option value="8">청년임대주택 1호(여성 전용)</option>
                              <option value="9">청년임대주택 2호(여성 전용)</option>
                              <option value="10">청년임대주택 3호(여성 전용)</option>
                              <option value="11">청년임대주택 4호(1층)</option>
                              <option value="12">청년임대주택 4호(2층)</option>
                            </select>
                          </div>
                          <div class="col-sm-6">
                            <label class="form-label" for="shareInfo">정보</label>
                            <input type="text" id="shareInfo" name="shareInfo" class="form-control" placeholder="(ex. 2/10),(ex. 5명)">
                          </div>
                          <div class="col-12 d-flex justify-content-end">
                            <button class="btn btn-primary btn-next" id="shareBtn">
                              <span class="align-middle d-sm-inline-block d-none me-sm-1">저장</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <script type="text/javascript">
              getShareNum(8);

              $("select[name='shareHouse']").change(function(){
                getShareNum($(this).val());
              });
              
              $("#shareBtn").click(function(){

                var dataForm = $("#shareHouseForm").serialize();

                  $.ajax({
                    type: "POST",
                    url: "./API/share_num_edit_api.php", // 서버 엔드포인트를 적절히 변경
                    dataType : 'json',
                    data: dataForm,
                    success: function(response) {
                        // 서버로부터 성공 응답을 받았을 때 처리
                        console.log(response);
                        if(response==1){
                          alert('정보가 변경되었습니다.');
                          // location.reload();
                        }

                    },
                    error: function(error) {
                        // 서버로부터 오류 응답을 받았을 때 처리
                        console.error("Error:", error);
                    }
                  });
              });

              function getShareNum(shareHouseId){
                $.ajax({
                  type: "POST",
                  url: "./API/share_num_get_api.php", // 서버 엔드포인트를 적절히 변경
                  data: {shareHouse:shareHouseId},
                  success: function(response) {
                      // 서버로부터 성공 응답을 받았을 때 처리
                       console.log(response);
                      $("input[name='shareInfo']").val(response);

                  },
                  error: function(error) {
                      // 서버로부터 오류 응답을 받았을 때 처리
                      console.error("Error:", error);
                  }
                });
              }
            </script>

          

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with ❤️ by
                  <a href="https://themeselection.com" target="_blank" class="footer-link fw-medium">ThemeSelection</a>
                </div>
                <div class="d-none d-lg-inline-block">
                  <a href="https://themeselection.com/license/" class="footer-link me-4" target="_blank">License</a>
                  <a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More Themes</a>

                  <a
                    href="https://demos.themeselection.com/sneat-bootstrap-html-admin-template/documentation/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a
                    href="https://themeselection.com/support/"
                    target="_blank"
                    class="footer-link d-none d-sm-inline-block"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->

    
    <script src="../../assets/vendor/libs/popper/popper.js"></script>
    <script src="../../assets/vendor/js/bootstrap.js"></script>
    <script src="../../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="../../assets/vendor/libs/hammer/hammer.js"></script>
    <script src="../../assets/vendor/libs/i18n/i18n.js"></script>
    <script src="../../assets/vendor/libs/typeahead-js/typeahead.js"></script>
    <script src="../../assets/vendor/js/menu.js"></script>

    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="../../assets/vendor/libs/flatpickr/flatpickr.js"></script>
    <script src="../../assets/vendor/libs/cleavejs/cleave.js"></script>
    <script src="../../assets/vendor/libs/cleavejs/cleave-phone.js"></script>
    <script src="../../assets/vendor/libs/jquery-repeater/jquery-repeater.js"></script>

    <!-- Main JS -->
    <script src="../../assets/js/main.js"></script>

    <!-- Page JS -->
    <script src="../../assets/js/offcanvas-send-invoice.js"></script>
    <script src="../../assets/js/app-invoice-add.js"></script>
  </body>
</html>
